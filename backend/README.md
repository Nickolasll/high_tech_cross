# Реализация API HighTechCross  

**Установка и запуск**  

Для быстрой установки проекта есть скрипт `setup.sh`.  
Он устанавливает postgres, создает для него базу данных, устанавливает requirements и применяет миграции Django.  
А также устанавливает фикстуру. Пришлось сделать специальную команду для `manage.py`, которая инициализирует активный турнир и
эмулирует действия команд.

После этого для запуска можно использовать команду:  
```sh
$ python3 manage.py runserver 8000
```

Для удаления базы данных можно использовать скрипт `dropdb.sh`.  

**Почему Django?**  
Я подумал, что нужна будет админка для добавления новых команд, заданий и соревнований. 
К тому же я хотел больше сосредоточиться на реализации предметной области и самом API.

**Структура проекта**  
- `/backend/` - здесь настройки Django, я почти их не менял, добавил только свой `Middleware` 
и один плагин для того, чтобы списки в админке выглядели получше, чем "из коробки";
- `/high_tech_cross/` - сам проект;
- `/high_tech_cross/fixtures/` - фикстура с командами, заданиями и соревнованием, может ускорить проверку проекта руками;
- `/high_tech_cross/models/` - модели и менеджеры сущностей предметной области;
- `/high_tech_cross/services/` - stateless службы, которые работают на изменение состояния сразу нескольких сущностей.
Я не хотел, чтобы модели и менеджеры имели поведение только по изменению самих себя;
- `/high_tech_cross/views/` - по сути мне нужны были обработчики http запросов, и они мне были нужны class based, но в 
Django я нашел лишь class based view. Их я и переделал, чтобы они возвращали json;
- `/high_tech_cross/serializers/` - Сериализаторы.

**Админка**

Админка доступна по адресу `http://127.0.0.1:8000/admin/`  
У админа логин `admin` и пароль `admin`  

В админке доступны для создания и редактирования команды, описания заданий и соревнование.  
У администратора нет доступа к редактированию таблиц лидеров и прогресса исполнения задания командами.  

При создании нового соревнования необходимо:
1. Создать новое соревнование `Competition`;
2. Заполнить поле `name` - название соревнования; 
3. Заполнить поле `start_time` - время старта соревнования. *Внимание* - если установить дату и время на `прямо сейчас`,
то администратор потеряет возможность изменять соревнование, так как оно будет считаться активным и не потерпит 
вмешательство;
4. В списке команд выбрать команды, которые будут участвовать в соревновании;
5. В списке заданий выбрать задания, которые команды будут выполнять в процессе соревнования;
6. Сохранить состояние соревнования;
7. На форме соревнования нажать на кнопку `Инициализировать` - тем самым администратор подтверждает соревнование.
Если администратор не подтвердил соревнование, оно будет игнорироваться.

**Ручная проверка**  
Логины и пароли предустановленных команд:  

login: best_team  
password: 777  

login: average_team  
password: 12345  

login: worst_team  
password: qwerty  
